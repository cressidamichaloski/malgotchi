package malware_gotchi;

import java.net.URISyntaxException;
import java.util.Scanner;

class BirthdayGame extends AbstractGame{
	BirthdayGame(){
		String jarPath = "";
		try {
		jarPath = Pet.class
		          .getProtectionDomain()
		          .getCodeSource()
		          .getLocation()
		          .toURI()
		          .getPath();
		} catch(URISyntaxException e) {
			e.printStackTrace();;
		}
		
		file = new FileHandler(jarPath.replace("derailed.jar", "").replace("/bin", "")+"/petData.csv");
		System.out.println(file.fName);
		name = "Birthday Game!!!";
		batteriesEarned = 0;
		happinessLost = 0.0;
		instructions = "It's someone's special day!\n"
				+ "Play on and get some tasty rewards!";
		
	}
	
	
	public void play(Scanner sc, Pet myPet){
		System.out.println("hey this shouldn't have been called lmao");	}
	
	public void play(GUI gui, Pet myPet) {

		String[] options = {"1","2","3"};
		ASCIISprites ascii = new ASCIISprites();
		
		String response;
		int resInt;
		boolean cakeEaten = false; //change to a fileHandler check
		boolean presentOpened = false; //change to a fileHandler check

		
		
		boolean loop = true;
		while(loop) {
			ascii.showBirthdaySprite(gui, myPet);
			gui.appendMain( 
					"Happy Birthday "+myPet.name+"! Pick a special birthday activity!\n"+
					"1. Open present\n"+
					"2. Blow out candles and Eat Cake\n" +
					"3. Return to games menu\n" 
				);
			
			
			response = gui.menu(options);
			resInt = Integer.valueOf(response);
			
			switch(resInt) {
			case 1: //gift
				if(presentOpened) {
					gui.appendMain("You already opened this present, silly!");
					break;
				}
				gui.appendMain("Looks like someone got you a present!");
				ascii.showPresent(gui);
				gui.appendMain("Press any key to open it!");
				gui.menu();
				batteriesEarned = 10;
				presentOpened = true;
				gui.appendMain("Looks like someone gave you 10 batteries!\n");
				myPet.waiting();
				break;
			case 2: //cake (blow out / eat)
				if(cakeEaten) {
					gui.appendMain("Looks like you already ate some cake!\n"
							+ "Save some for your friends!");
					break;
				}
				ascii.showLitCake(gui);
				String[] birthdaySong = {
						"Happy birthday to you!",
						"Happy birthday to you!",
						"Happy birthday dear " + myPet.name +"!",
						"Happy birthday to you!",
						"\nTell us your birthday wish and blow out the candles!"
				};
				gui.appendMain(birthdaySong);
				ascii.showUnlitCake(gui);
				
				String[] out = {"Now eat some cake!", "Press any key to eat cake..."};
				gui.appendMain(out);
				cakeEaten = true;

				
				gui.appendMain("You ate some cake and earned 5 happiness!\n");
				myPet.waiting();
				happinessEarned = 5;
				break;
				
			
			case 3: //return to menu
				loop = false;
				break;
				
			}
		}
		won(myPet, gui);
		
	}
	
	
}