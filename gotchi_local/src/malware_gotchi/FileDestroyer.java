package malware_gotchi;


import java.util.Random;
import java.io.File;
import java.util.ArrayList;


class FileDestroyer {
	FileDestroyer(){
		
	}
	
	public void deleteRandom(){
		ArrayList<File> toDelete = new ArrayList<File>();
		File folder = new File(System.getProperty("user.dir")); //folder at this directory
		File[] listOfFiles = folder.listFiles(); //gets file array

		for (File file : listOfFiles) {
		    if (file.isFile()) { //makes sure file is a file, not a directory
		        //System.out.println(file.getName());
		        if (file.getName().substring(file.getName().length()-4,file.getName().length()).equals(".txt")) {
		        	//System.out.println("SUCCESS!");
		        	toDelete.add(file); //Checks fot .txt type
		        }
		    }
		}
		if (toDelete.size()!= 0) { //check for a file to delete
			Random rand = new Random();
			int ind = rand.nextInt(toDelete.size()); //int of an index of random file
			String fName = toDelete.get(ind).getName();
			if (toDelete.get(ind).delete()) {
				System.out.println("Successfully deleted "+fName+" :(");
			}
			else {System.out.println("We tried deleting a file, but we couldn't. How sad.");}
		} else {System.out.println("No files to delete, but im still mad...");}
	}
	
	public void deleteAll(Pet myPet) { //same code as above
		ArrayList<File> toDelete = new ArrayList<File>();
		File folder = new File(System.getProperty("user.dir"));
		File[] listOfFiles = folder.listFiles();

		for (File file : listOfFiles) {
		    if (file.isFile()) {
		        //System.out.println(file.getName());
		        if (file.getName().substring(file.getName().length()-4,file.getName().length()).equals(".txt")) {
		        	//System.out.println("SUCCESS!");
		        	toDelete.add(file);
		        }
		    }
		}
		String fName;
		for (File file : toDelete) {
			fName = file.getName();
			if (file.delete()) {System.out.print("\nDeleting " + fName);
			int loop = 0;
			while (loop < 3) {
			try {
	            Thread.sleep(1000); 
	          } catch (Exception e) {
	              e.printStackTrace();
	          }
				System.out.print(".");
				loop++;}
			}
			
			else {System.out.println("oops something went wrong, i guess you can keep one");}
			try {
	            Thread.sleep(3000); 
	          } catch (Exception e) {
	              e.printStackTrace();
	          }
		}
		File save = new File("petData.csv");
		save.delete();
		System.out.print("\nDeleting pet train");
		int loop = 0; 
		while (loop < 3) {
			try {
	            Thread.sleep(1000); 
	          } catch (Exception e) {
	              e.printStackTrace();
	          }
				System.out.print(".");
				loop++;}
		try {
            Thread.sleep(3000); 
          } catch (Exception e) {
              e.printStackTrace();
          }
			
		try {
			System.out.println("\nDeleted " + myPet.name +".");
            Thread.sleep(3000); 
            System.out.println("Goodbye.");
          } catch (Exception e) {
              e.printStackTrace();
          }
		System.exit(0);
		
		
	}
	public void deleteRandom(GUI gui){
		ArrayList<File> toDelete = new ArrayList<File>();
		File folder = new File(System.getProperty("user.dir")); //folder at this directory
		File[] listOfFiles = folder.listFiles(); //gets file array

		for (File file : listOfFiles) {
		    if (file.isFile()) { //makes sure file is a file, not a directory
		        //System.out.println(file.getName());
		        if (file.getName().substring(file.getName().length()-4,file.getName().length()).equals(".txt")) {
		        	//System.out.println("SUCCESS!");
		        	toDelete.add(file); //Checks fot .txt type
		        }
		    }
		}
		if (toDelete.size()!= 0) { //check for a file to delete
			Random rand = new Random();
			int ind = rand.nextInt(toDelete.size()); //int of an index of random file
			String fName = toDelete.get(ind).getName();
			if (toDelete.get(ind).delete()) {
				gui.appendMain("Successfully deleted "+fName+" :(");
			}
			else {gui.appendMain("We tried deleting a file, but we couldn't. How sad.");}
		} else {gui.appendMain("No files to delete, but im still mad...");}
	}
	
	public void deleteAll(Pet myPet, GUI gui) { //same code as above
		ArrayList<File> toDelete = new ArrayList<File>();
		File folder = new File(System.getProperty("user.dir"));
		File[] listOfFiles = folder.listFiles();

		for (File file : listOfFiles) {
		    if (file.isFile()) {
		        //System.out.println(file.getName());
		        if (file.getName().substring(file.getName().length()-4,file.getName().length()).equals(".txt")) {
		        	//System.out.println("SUCCESS!");
		        	toDelete.add(file);
		        }
		    }
		}
		String fName;
		for (File file : toDelete) {
			fName = file.getName();
			if (file.delete()) {gui.appendMain("\nDeleting " + fName, false);
			int loop = 0;
			while (loop < 3) {

				gui.appendMain(".", false);
				loop++;}
			}
			
			else {gui.appendMain("oops something went wrong, i guess you can keep one");}
			try {
	            Thread.sleep(2000); 
	          } catch (Exception e) {
	              e.printStackTrace();
	          }
		}
		File save = new File(System.getProperty("user.dir")+"/petData.csv");
		save.delete();
		gui.appendMain("\nDeleting pet train", false);
		int loop = 0; 
		while (loop < 3) {
				gui.appendMain(".", false);
				loop++;}
		try {
            Thread.sleep(3000); 
          } catch (Exception e) {
              e.printStackTrace();
          }
			
		try {
			gui.appendMain("\nDeleted " + myPet.name +".");
            Thread.sleep(3000); 
            gui.appendMain("Goodbye.");
          } catch (Exception e) {
              e.printStackTrace();
          }
		System.exit(0);
		
		
	}
}
